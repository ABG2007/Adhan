<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Application d'heures de priÃ¨re (Adhan) - Retrouvez facilement les heures des 5 priÃ¨res quotidiennes">
    <meta name="theme-color" content="#4CAF50">
    <title>Adhan - Heures de PriÃ¨re</title>

    <!-- Styles -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/header-rtl-fix.css">
    <link rel="stylesheet" href="css/logo-image.css">
    <link rel="stylesheet" href="css/keyboard-nav.css">
    <link rel="stylesheet" href="css/location-style.css">
    <link rel="stylesheet" href="css/header-mobile-fix.css">
    <link rel="stylesheet" href="css/header-icons-fix.css">
    <link rel="stylesheet" href="css/theme-colors.css">
    <link rel="stylesheet" href="css/about-modal.css">

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Police arabe (Amiri) -->
    <link rel="stylesheet" href="css/arabic-font.css">

    <!-- Manifest for PWA -->
    <link rel="manifest" href="manifest.json">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="assets/images/icon-192x192.png">
    <link rel="apple-touch-icon" href="assets/images/icon-192x192.png">

    <!-- Leaflet CSS (for Geosearch) -->
    <!-- <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" /> -->
    <!-- Leaflet Geosearch CSS (for Geosearch) -->
    <!-- <link rel="stylesheet" href="https://unpkg.com/leaflet-geosearch@3.11.0/dist/geosearch.css" /> -->
</head>

<body>
    <div class="app-container">
        <header>
            <div class="logo">
                <img src="assets/images/icon-48x48.png" alt="Adhan Logo" class="header-logo-img">
                <h1>Adhan</h1>
            </div>

            <div class="header-actions">
                <div class="language-selector-container">
                    <button id="languageToggle" aria-label="Changer de langue">
                        <i class="fas fa-globe"></i>
                        <span class="current-lang">FR</span>
                    </button>
                    <div class="language-dropdown">
                        <div class="language-option" data-lang="fr" title="FranÃ§ais">
                            <span class="lang-flag">ðŸ‡«ðŸ‡·</span>
                            <span class="lang-name">FranÃ§ais</span>
                        </div>
                        <div class="language-option" data-lang="en" title="English">
                            <span class="lang-flag">ðŸ‡¬ðŸ‡§</span>
                            <span class="lang-name">English</span>
                        </div>
                        <div class="language-option" data-lang="ar" title="Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©">
                            <span class="lang-flag">ðŸ‡©ðŸ‡¿</span>
                            <span class="lang-name">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</span>
                        </div>
                        <div class="language-option" data-lang="es" title="EspaÃ±ol">
                            <span class="lang-flag">ðŸ‡ªðŸ‡¸</span>
                            <span class="lang-name">EspaÃ±ol</span>
                        </div>
                        <div class="language-option" data-lang="tr" title="TÃ¼rkÃ§e">
                            <span class="lang-flag">ðŸ‡¹ðŸ‡·</span>
                            <span class="lang-name">TÃ¼rkÃ§e</span>
                        </div>
                        <div class="language-option" data-lang="de" title="Deutsch">
                            <span class="lang-flag">ðŸ‡©ðŸ‡ª</span>
                            <span class="lang-name">Deutsch</span>
                        </div>
                        <div class="language-option" data-lang="id" title="Bahasa Indonesia">
                            <span class="lang-flag">ðŸ‡®ðŸ‡©</span>
                            <span class="lang-name">Bahasa Indonesia</span>
                        </div>
                    </div>
                </div>
                <button id="themeToggle" aria-label="Changer de thÃ¨me">
                    <i class="fas fa-moon"></i>
                </button>
                <button id="settingsBtn" aria-label="ParamÃ¨tres">
                    <i class="fas fa-cog"></i>
                </button>
            </div>
        </header>

        <main>
            <section class="date-display">
                <div class="gregorian-date" id="gregorianDate"></div>
                <div class="current-time" id="currentTime"></div>
            </section>

            <section class="location-info">
                <div class="location" id="currentLocation">
                    <i class="fas fa-map-marker-alt"></i>
                    <span id="locationText">Chargement de la localisation...</span>
                </div>
                <button id="changeLocationBtn" class="btn-small">
                    <i class="fas fa-edit"></i> Changer
                </button>
            </section>

            <section class="next-prayer-info">
                <h2>Prochaine PriÃ¨re</h2>
                <div class="next-prayer">
                    <div class="prayer-name" id="nextPrayerName">Chargement...</div>
                    <div class="prayer-time" id="nextPrayerTime">--:--</div>
                </div>
                <div class="countdown" id="countdown">--:--:--</div>
                <button id="stopAdhanSoundBtn" style="display: none; margin-top: 15px;">Stop sound</button>
            </section>

            <section class="prayer-times">
                <h2>Horaires des PriÃ¨res</h2>
                <div class="prayer-card" data-prayer="fajr">
                    <div class="prayer-info">
                        <div class="prayer-icon"><i class="fas fa-sun"></i></div>
                        <div class="prayer-name">Fajr</div>
                    </div>
                    <div class="prayer-time" id="fajrTime">--:--</div>
                    <div class="notification-toggle">
                        <input type="checkbox" id="fajrNotif" class="notification-checkbox" checked>
                        <label for="fajrNotif"><i class="fas fa-volume-up"></i></label>
                    </div>
                </div>

                <div class="prayer-card" data-prayer="sunrise">
                    <div class="prayer-info">
                        <div class="prayer-icon"><i class="fas fa-sun"></i></div>
                        <div class="prayer-name">Shuruq</div>
                    </div>
                    <div class="prayer-time" id="sunriseTime">--:--</div>
                    <div class="notification-toggle">
                        <input type="checkbox" id="sunriseNotif" class="notification-checkbox">
                        <label for="sunriseNotif"><i class="fas fa-volume-up"></i></label>
                    </div>
                </div>

                <div class="prayer-card" data-prayer="dhuhr">
                    <div class="prayer-info">
                        <div class="prayer-icon"><i class="fas fa-sun"></i></div>
                        <div class="prayer-name">Dhuhr</div>
                    </div>
                    <div class="prayer-time" id="dhuhrTime">--:--</div>
                    <div class="notification-toggle">
                        <input type="checkbox" id="dhuhrNotif" class="notification-checkbox" checked>
                        <label for="dhuhrNotif"><i class="fas fa-volume-up"></i></label>
                    </div>
                </div>

                <div class="prayer-card" data-prayer="asr">
                    <div class="prayer-info">
                        <div class="prayer-icon"><i class="fas fa-sun"></i></div>
                        <div class="prayer-name">Asr</div>
                    </div>
                    <div class="prayer-time" id="asrTime">--:--</div>
                    <div class="notification-toggle">
                        <input type="checkbox" id="asrNotif" class="notification-checkbox" checked>
                        <label for="asrNotif"><i class="fas fa-volume-up"></i></label>
                    </div>
                </div>

                <div class="prayer-card" data-prayer="maghrib">
                    <div class="prayer-info">
                        <div class="prayer-icon"><i class="fas fa-moon"></i></div>
                        <div class="prayer-name">Maghrib</div>
                    </div>
                    <div class="prayer-time" id="maghribTime">--:--</div>
                    <div class="notification-toggle">
                        <input type="checkbox" id="maghribNotif" class="notification-checkbox" checked>
                        <label for="maghribNotif"><i class="fas fa-volume-up"></i></label>
                    </div>
                </div>

                <div class="prayer-card" data-prayer="isha">
                    <div class="prayer-info">
                        <div class="prayer-icon"><i class="fas fa-moon"></i></div>
                        <div class="prayer-name">Isha</div>
                    </div>
                    <div class="prayer-time" id="ishaTime">--:--</div>
                    <div class="notification-toggle">
                        <input type="checkbox" id="ishaNotif" class="notification-checkbox" checked>
                        <label for="ishaNotif"><i class="fas fa-volume-up"></i></label>
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <a href="mosques.html" id="findMosquesLinkFooter" class="footer-link">
                <i class="fas fa-mosque"></i> <span data-translate="footer.findMosques">Trouver des mosquÃ©es Ã 
                    proximitÃ©</span>
            </a>
            <p class="copyright">&copy; 2025 ABG Adhan. <span data-translate="footer.copyrightText">Tous droits
                    rÃ©servÃ©s.</span></p>
        </footer>

        <!-- Settings Modal -->
        <div id="settingsModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>ParamÃ¨tres</h2>
                    <button id="closeSettingsBtn" class="close-btn">&times;</button>
                </div>

                <div class="modal-body">
                    <div class="settings-section">
                        <h3 data-translate="settings.sectionCalculationMethod">MÃ©thode de Calcul</h3>
                        <select id="calculationMethod" class="select-input">
                            <option value="2">Islamic Society of North America (ISNA)</option>
                            <option value="0" selected>Muslim World League</option>
                            <option value="1">Egyptian General Authority of Survey</option>
                            <option value="3">Umm al-Qura University, Makkah</option>
                            <option value="4">University of Islamic Sciences, Karachi</option>
                            <option value="5">Institute of Geophysics, University of Tehran</option>
                            <option value="7">Shia Ithna-Ashari, Leva Research Institute, Qum</option>
                            <option value="8">Gulf Region</option>
                            <option value="9">Kuwait</option>
                            <option value="10">Qatar</option>
                            <option value="11">Majlis Ugama Islam Singapura, Singapore</option>
                            <option value="12">Union Organization islamic de France</option>
                            <option value="13">Diyanet Ä°ÅŸleri BaÅŸkanlÄ±ÄŸÄ±, Turkey</option>
                            <option value="14">Spiritual Administration of Muslims of Russia</option>
                        </select>
                    </div>

                    <div class="settings-section">
                        <h3 data-translate="settings.sectionAsrMethod">MÃ©thode Asr</h3>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="asrStandard" name="asrMethod" value="0" checked>
                                <label for="asrStandard">Standard (Shafii, Maliki, Hanbali)</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="asrHanafi" name="asrMethod" value="1">
                                <label for="asrHanafi">Hanafi</label>
                            </div>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3 data-translate="settings.sectionTimeFormat">Format de l'Heure</h3>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="time12h" name="timeFormat" value="12h">
                                <label for="time12h">12 heures (AM/PM)</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="time24h" name="timeFormat" value="24h" checked>
                                <label for="time24h">24 heures</label>
                            </div>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3 data-translate="settings.sectionNotifications">Notifications</h3>
                        <div class="toggle-option">
                            <span>Activer les notifications audio</span>
                            <label class="switch">
                                <input type="checkbox" id="notificationsEnabled" checked>
                                <span class="slider round"></span>
                            </label>
                        </div>
                        <div class="audio-selection" id="audioSelectionContainer">
                            <label for="adhanSound">Son de l'Adhan</label>
                            <select id="adhanSound" class="select-input">
                                <option value="adhan.mp3" selected>Adhan Standard</option>
                                <option value="adhan_makkah.mp3">Adhan Makkah</option>
                                <option value="adhan_fajr.mp3">Adhan Fajr</option>
                            </select>
                            <button id="testAdhanBtn" class="btn-small">Test</button>
                        </div>

                        <div class="audio-selection" style="margin-top: 10px;">
                            <label for="prayerReminder" data-translate="settings.prayerReminder">Rappel avant la
                                priÃ¨re</label>
                            <select id="prayerReminder" class="select-input">
                                <option value="0" selected>-</option>
                                <option value="5">5</option>
                                <option value="10">10</option>
                                <option value="15">15</option>
                                <option value="20">20</option>
                                <option value="30">30</option>
                            </select>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3 data-translate="settings.sectionTimeAdjustments">Ajustements des Horaires (minutes)</h3>
                        <div class="adjustment-grid">
                            <div class="adjustment-item">
                                <label for="fajrAdjust">Fajr</label>
                                <input type="number" id="fajrAdjust" class="number-input" value="0" min="-30" max="30">
                            </div>
                            <div class="adjustment-item">
                                <label for="sunriseAdjust">Shuruq</label>
                                <input type="number" id="sunriseAdjust" class="number-input" value="0" min="-30"
                                    max="30">
                            </div>
                            <div class="adjustment-item">
                                <label for="dhuhrAdjust">Dhuhr</label>
                                <input type="number" id="dhuhrAdjust" class="number-input" value="0" min="-30" max="30">
                            </div>
                            <div class="adjustment-item">
                                <label for="asrAdjust">Asr</label>
                                <input type="number" id="asrAdjust" class="number-input" value="0" min="-30" max="30">
                            </div>
                            <div class="adjustment-item">
                                <label for="maghribAdjust">Maghrib</label>
                                <input type="number" id="maghribAdjust" class="number-input" value="0" min="-30"
                                    max="30">
                            </div>
                            <div class="adjustment-item">
                                <label for="ishaAdjust">Isha</label>
                                <input type="number" id="ishaAdjust" class="number-input" value="0" min="-30" max="30">
                            </div>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3><span id="color-theme-title" data-translate="settings.sectionColorTheme">ThÃ¨me de
                                Couleur</span></h3>
                        <div class="color-theme-options">
                            <div class="color-option color-green active" data-theme="green" title="Vert (DÃ©faut)"></div>
                            <div class="color-option color-blue" data-theme="blue" title="Bleu"></div>
                            <div class="color-option color-crimson" data-theme="crimson" title="Grenat"></div>
                            <div class="color-option color-orange" data-theme="orange" title="Orange"></div>
                            <div class="color-option color-pink" data-theme="pink" title="Rose"></div>
                            <div class="color-option color-purple" data-theme="purple" title="Violet"></div>
                            <div class="color-option color-emerald" data-theme="emerald" title="Ã‰meraude"></div>
                        </div>
                    </div>

                    <div class="settings-actions">
                        <button id="aboutAppBtn" class="btn text-btn" data-translate="settings.aboutAppButton">Ã€ propos
                            de l'application</button>
                        <div class="main-actions">
                            <button id="saveSettingsBtn" class="btn primary-btn">Enregistrer</button>
                            <button id="resetSettingsBtn" class="btn secondary-btn">RÃ©initialiser</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Location Modal -->
        <div id="locationModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Choisir une Localisation</h2>
                    <button id="closeLocationBtn" class="close-btn">&times;</button>
                </div>

                <div class="modal-body">
                    <div class="location-options">
                        <button id="autoLocationBtn" class="btn primary-btn">
                            <i class="fas fa-location-arrow"></i> Utiliser ma position actuelle
                        </button>

                        <div class="or-divider">OU</div>

                        <div class="search-container">
                            <!-- Original simple search input structure -->
                            <div class="search-input-container">
                                <input type="text" id="locationSearch" placeholder="Rechercher une ville...">
                                <button id="searchLocationBtn">
                                    <i class="fas fa-search"></i>
                                </button>
                            </div>
                            <div id="searchResults" class="search-results">
                                <!-- Search results will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notification Permission Modal -->
        <div id="notificationModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Autorisation de Notification</h2>
                </div>

                <div class="modal-body">
                    <p>Adhan souhaite jouer l'adhan Ã  l'heure des priÃ¨res. Voulez-vous autoriser les notifications
                        audio?</p>
                    <div class="notification-actions">
                        <button id="allowNotificationsBtn" class="btn primary-btn">Autoriser</button>
                        <button id="denyNotificationsBtn" class="btn secondary-btn">Plus tard</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="loader" class="loader-container">
            <div class="loader"></div>
            <p>Chargement des horaires de priÃ¨re...</p>
        </div>

        <div id="installPrompt" class="install-prompt">
            <p><i class="fas fa-mobile-alt"></i> Installez Adhan sur votre appareil</p>
            <div class="install-actions">
                <button id="installBtn" class="btn primary-btn">Installer</button>
                <button id="dismissInstallBtn" class="btn text-btn">Ignorer</button>
            </div>
        </div>

        <!-- About App Modal -->
        <div id="aboutModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="aboutModalTitle">Ã€ propos de l'application</h2>
                    <button id="closeAboutBtn" class="close-btn">&times;</button>
                </div>

                <div class="modal-body about-content">
                    <div class="app-logo">
                        <img src="assets/images/icon-192x192.png" alt="Adhan App Logo" width="80" height="80">
                    </div>

                    <h3 class="app-name">Adhan</h3>
                    <p class="app-version"><span id="aboutVersionLabel">Version</span> 1.0.0</p>

                    <div class="app-description">
                        <p id="aboutDescription">Adhan est une application de priÃ¨re islamique conÃ§ue pour fournir des
                            horaires de priÃ¨re prÃ©cis et des notifications pour les cinq priÃ¨res quotidiennes.</p>
                        <p id="aboutDescription2">L'application utilise des mÃ©thodes de calcul rÃ©putÃ©es et prend en
                            charge plusieurs langues pour servir la communautÃ© musulmane mondiale.</p>
                    </div>

                    <div class="app-features">
                        <h4 id="aboutFeaturesTitle">FonctionnalitÃ©s principales</h4>
                        <ul>
                            <li id="aboutFeature1">Horaires de priÃ¨re prÃ©cis basÃ©s sur votre localisation</li>
                            <li id="aboutFeature2">Notifications audio pour chaque priÃ¨re</li>
                            <li id="aboutFeature3">Support multilingue (FranÃ§ais, Anglais, Arabe, etc.)</li>
                            <li id="aboutFeature4">ThÃ¨mes de couleur personnalisables</li>
                            <li id="aboutFeature5">Mode hors-ligne</li>
                            <li id="aboutFeature6">Interface rÃ©active pour mobile et bureau</li>
                        </ul>
                    </div>

                    <div class="app-credits">
                        <h4 id="aboutCreditsTitle">CrÃ©dits</h4>
                        <p id="aboutDevelopedWith">DÃ©veloppÃ© avec &#10084; pour la communautÃ© musulmane</p>
                        <p class="copyright">&copy; 2025 Adhan App. <span id="aboutCopyright">Tous droits
                                rÃ©servÃ©s.</span></p>
                    </div>
                </div>
            </div>
        </div>

        <audio id="adhanAudio" preload="none">
            <source src="assets/audio/adhan.mp3" type="audio/mpeg">
        </audio>
    </div>

    <!-- Scripts -->
    <script src="js/prayer-times.js"></script>
    <script src="js/api-handler.js"></script>
    <script src="js/translations.js"></script>

    <!-- Leaflet JS (for Geosearch) -->
    <!-- <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script> -->
    <!-- Leaflet Geosearch JS (for Geosearch) -->
    <!-- <script src="https://unpkg.com/leaflet-geosearch@3.11.0/dist/geosearch.umd.js"></script> -->

    <script src="js/script.js"></script>
    <script>
        // Script to broadcast language changes to other tabs
        document.querySelectorAll('.language-option').forEach(option => {
            option.addEventListener('click', function() {
                const lang = this.getAttribute('data-lang');
                // Set the language in localStorage
                if (window.localStorage) {
                    window.localStorage.setItem('adhan_language', lang);
                    window.location.reload(); // Recharge la page pour appliquer la langue partout
                }
            });
        });
    </script>
    <script>
      // Enregistrement du service worker pour le mode offline/PWA
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
          navigator.serviceWorker.register('service-worker.js')
            .then(function(registration) {
              console.log('Service Worker enregistrÃ© avec succÃ¨sÂ :', registration.scope);
            })
            .catch(function(error) {
              console.log('Ã‰chec de l\'enregistrement du Service WorkerÂ :', error);
            });
        });
      }
    </script>
</body>

</html>